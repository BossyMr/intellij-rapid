<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.bossymr.intellij-rapid</id>
    <name>Rapid</name>
    <vendor>BossyMr</vendor>

    <description>Adds language support to the RAPID language.</description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File Type -->

        <fileType name="RAPID" language="RAPID" extensions="mod"
                  implementationClass="com.bossymr.rapid.language.RapidFileType" fieldName="INSTANCE"/>

        <!-- Language -->

        <lang.parserDefinition language="RAPID"
                               implementationClass="com.bossymr.rapid.language.parser.RapidParserDefinition"/>

        <annotator language="RAPID" implementationClass="com.bossymr.rapid.ide.insight.RapidAnnotator"/>

        <colorSettingsPage implementation="com.bossymr.rapid.ide.highlight.RapidColorSettingsPage"/>

        <lang.syntaxHighlighterFactory language="RAPID"
                                       implementationClass="com.bossymr.rapid.ide.highlight.RapidHighlighterFactory"/>

        <lang.findUsagesProvider language="RAPID" implementationClass="com.bossymr.rapid.ide.RapidFindUsagesProvider"/>

        <lang.psiStructureViewFactory language="RAPID"
                                      implementationClass="com.bossymr.rapid.ide.structure.RapidStructureViewBuilderFactory"/>

        <navbar implementation="com.bossymr.rapid.ide.RapidNavigationBar"/>

        <!-- Refactoring -->

        <lang.refactoringSupport language="RAPID"
                                 implementationClass="com.bossymr.rapid.ide.refactor.RapidRefactoringSupportProvider"/>

        <lang.namesValidator language="RAPID" implementationClass="com.bossymr.rapid.ide.refactor.RapidNamesValidator"/>

        <!-- PsiElement  -->

        <projectService serviceImplementation="com.bossymr.rapid.language.psi.RapidElementFactory"/>
        <projectService serviceImplementation="com.bossymr.rapid.robot.ui.RobotToolWindowService"/>

        <stubElementTypeHolder externalIdPrefix="rapid." class="com.bossymr.rapid.language.psi.RapidStubElementTypes"/>

        <stubIndex implementation="com.bossymr.rapid.language.psi.stubs.index.RapidAliasIndex"/>
        <stubIndex implementation="com.bossymr.rapid.language.psi.stubs.index.RapidComponentIndex"/>
        <stubIndex implementation="com.bossymr.rapid.language.psi.stubs.index.RapidFieldIndex"/>
        <stubIndex implementation="com.bossymr.rapid.language.psi.stubs.index.RapidModuleIndex"/>
        <stubIndex implementation="com.bossymr.rapid.language.psi.stubs.index.RapidRecordIndex"/>
        <stubIndex implementation="com.bossymr.rapid.language.psi.stubs.index.RapidRoutineIndex"/>
        <stubIndex implementation="com.bossymr.rapid.language.psi.stubs.index.RapidSymbolIndex"/>

        <!-- Robot -->

        <applicationService serviceInterface="com.bossymr.rapid.robot.RemoteRobotService"
                            serviceImplementation="com.bossymr.rapid.robot.impl.RemoteRobotServiceImpl"/>

        <toolWindow id="Robot" anchor="right" icon="com.bossymr.rapid.RapidIcons.ROBOT_TOOL_WINDOW"
                    factoryClass="com.bossymr.rapid.robot.ui.RobotToolWindowFactory"/>

        <editorNotificationProvider implementation="com.bossymr.rapid.robot.ui.RobotNotificationProvider"/>

        <notificationGroup displayType="STICKY_BALLOON" id="Robot Connection Error" bundle="messages.RapidBundle"
                           key="notification.group.robot.connect.error"/>

        <postStartupActivity implementation="com.bossymr.rapid.robot.impl.RobotStartupActivity"/>

        <gotoSymbolContributor implementation="com.bossymr.rapid.ide.navigation.RapidSymbolNavigationContributor"/>
        <gotoClassContributor implementation="com.bossymr.rapid.ide.navigation.RapidClassNavigationContributor"/>

        <completion.contributor language="RAPID"
                                implementationClass="com.bossymr.rapid.ide.completion.RapidKeywordCompletionContributor"/>
        <completion.contributor language="RAPID"
                                implementationClass="com.bossymr.rapid.ide.completion.RapidSymbolCompletionContributor"/>

        <localInspection language="RAPID" enabledByDefault="true" level="WARNING"
                         groupPath="Rapid" groupKey="inspection.group.declaration.redundancy"
                         bundle="messages.RapidBundle" key="inspection.name.unused.declaration"
                         implementationClass="com.bossymr.rapid.ide.inspection.UnusedDeclarationInspection"/>
        <documentationProvider implementation="com.bossymr.rapid.ide.documentation.RapidDocumentationProvider"/>

        <langCodeStyleSettingsProvider
                implementation="com.bossymr.rapid.ide.codeStyle.RapidLanguageCodeStyleSettingsProvider"/>

        <lang.formatter language="RAPID"
                        implementationClass="com.bossymr.rapid.ide.codeStyle.RapidFormattingModelBuilder"/>

        <lang.commenter language="RAPID" implementationClass="com.bossymr.rapid.ide.RapidCommenter"/>
        <lang.braceMatcher language="RAPID" implementationClass="com.bossymr.rapid.ide.RapidBraceMatcher"/>
        <lang.quoteHandler language="RAPID" implementationClass="com.bossymr.rapid.RapidQuoteHandler"/>
    </extensions>

    <actions>
        <action id="com.bossymr.rapid.ide.actions.RapidCreateFileAction"
                class="com.bossymr.rapid.ide.actions.RapidCreateFileAction">
            <add-to-group group-id="NewGroup" anchor="before" relative-to-action="NewFile"/>
        </action>

        <action id="com.bossymr.rapid.robot.actions.ConnectAction" icon="AllIcons.General.Add"
                class="com.bossymr.rapid.robot.actions.ConnectAction" text="Connect..."/>

        <action id="com.bossymr.rapid.robot.actions.RefreshAction" icon="AllIcons.Actions.Refresh"
                class="com.bossymr.rapid.robot.actions.RefreshAction" text="Refresh">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl F5"/>
        </action>

        <action id="com.bossymr.rapid.robot.actions.DisconnectAction" icon="AllIcons.Actions.Suspend"
                class="com.bossymr.rapid.robot.actions.DisconnectAction" text="Disconnect">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl F2"/>
        </action>

        <action id="com.bossymr.rapid.robot.actions.DeleteAction" class="com.bossymr.rapid.robot.actions.DeleteAction"
                text="Delete">
            <keyboard-shortcut keymap="$default" first-keystroke="DELETE"/>
        </action>

        <action id="com.bossymr.rapid.robot.actions.DownloadAction" icon="AllIcons.Actions.CheckOut"
                class="com.bossymr.rapid.robot.actions.DownloadAction" text="Download"/>

        <action id="com.bossymr.rapid.robot.actions.UploadAction" icon="AllIcons.Vcs.Push"
                class="com.bossymr.rapid.robot.actions.UploadAction" text="Upload"/>

        <group id="RobotContextMenu">
            <reference id="com.bossymr.rapid.robot.actions.ConnectAction"/>
            <reference id="com.bossymr.rapid.robot.actions.DeleteAction"/>
        </group>

        <group id="RobotToolWindow">
            <reference id="com.bossymr.rapid.robot.actions.ConnectAction"/>
            <reference id="com.bossymr.rapid.robot.actions.RefreshAction"/>
            <reference id="com.bossymr.rapid.robot.actions.DisconnectAction"/>
            <separator/>
            <reference id="com.bossymr.rapid.robot.actions.DownloadAction"/>
            <reference id="com.bossymr.rapid.robot.actions.UploadAction"/>
        </group>
    </actions>
</idea-plugin>