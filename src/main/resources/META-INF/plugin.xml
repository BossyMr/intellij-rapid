<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.bossymr.intellij-rapid</id>
    <name>Rapid</name>
    <vendor>BossyMr</vendor>

    <description>Adds language support to the RAPID language.</description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File Type -->

        <fileType name="RAPID" language="RAPID" extensions="mod"
                  implementationClass="com.bossymr.rapid.language.RapidFileType" fieldName="INSTANCE"/>

        <!-- PsiElement  -->

        <projectService serviceImplementation="com.bossymr.rapid.language.psi.RapidElementFactory"/>

        <!-- Robot -->

        <projectService serviceInterface="com.bossymr.rapid.robot.RobotService"
                        serviceImplementation="com.bossymr.rapid.robot.impl.RobotServiceImpl"/>

        <postStartupActivity implementation="com.bossymr.rapid.robot.impl.RobotStartupActivity"/>

        <toolWindow id="Robot" anchor="right" icon="com.bossymr.rapid.RapidIcons.ROBOT_TOOL_WINDOW"
                    factoryClass="com.bossymr.rapid.robot.ui.RobotToolWindowFactory"/>

        <editorNotificationProvider implementation="com.bossymr.rapid.robot.ui.RobotNotificationProvider"/>

        <!-- Language -->

        <lang.parserDefinition language="RAPID"
                               implementationClass="com.bossymr.rapid.language.parser.RapidParserDefinition"/>

        <stubElementTypeHolder externalIdPrefix="rapid." class="com.bossymr.rapid.language.psi.RapidStubElementTypes"/>

        <stubIndex implementation="com.bossymr.rapid.language.psi.stubs.index.RapidSymbolNameIndex"/>
    </extensions>

    <actions>
        <action id="com.bossymr.rapid.robot.actions.ConnectAction" icon="AllIcons.General.Add"
                class="com.bossymr.rapid.robot.actions.ConnectAction" text="Connect"/>

        <action id="com.bossymr.rapid.robot.actions.RefreshAction" icon="AllIcons.Actions.Refresh"
                class="com.bossymr.rapid.robot.actions.RefreshAction" text="Refresh">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl F5"/>
        </action>

        <action id="com.bossymr.rapid.robot.actions.DisconnectAction" icon="AllIcons.Actions.Suspend"
                class="com.bossymr.rapid.robot.actions.DisconnectAction" text="Disconnect">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl F2"/>
        </action>

        <action id="com.bossymr.rapid.robot.actions.DeleteAction" class="com.bossymr.rapid.robot.actions.DeleteAction"
                text="Delete">
            <keyboard-shortcut keymap="$default" first-keystroke="DELETE"/>
        </action>

        <group id="RobotContextMenu">
            <reference id="com.bossymr.rapid.robot.actions.ConnectAction"/>
            <reference id="com.bossymr.rapid.robot.actions.DeleteAction"/>
        </group>

        <group id="RobotToolWindow">
            <reference id="com.bossymr.rapid.robot.actions.ConnectAction"/>
            <reference id="com.bossymr.rapid.robot.actions.RefreshAction"/>
            <reference id="com.bossymr.rapid.robot.actions.DisconnectAction"/>
        </group>
    </actions>
</idea-plugin>